#include <stdio.h>
#include <unistd.h>
#include "readGpio20.h"
#include "arduino-serial-lib.h"

int main()
{
   int fd =  serialport_init("/dev/ttyS0", 9600);
   char buffer[2];
   while(1){
      int value = readGpio20();

      if (value == -1) {
      
      serialport_flush(fd);
      serial
      return -1;}
   
      if( value == 1){
         sprintf(buffer,"%d\n",value);
         printf("%s", buffer);
         serialport_write(fd, buffer);
         sleep(1);
      }
      
   }
   serialport_flush(fd);
   serialport_close(fd);
   return 0;
}
